<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>http://win7FreeSyutoku.comにようこそ!</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#0f1724;
      --accent:#1e90ff;
      --text:#e6eef8;
      --muted:#9fb3d6;
      --danger:#ff6b6b;
      font-family: "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
    }
    html,body{height:100%;}
    body{
      margin:0;
      background: linear-gradient(180deg,#071022 0%, #0b1630 100%);
      color:var(--text);
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:100vh;
    }
    header{
      width:100%;
      padding:28px 16px;
      text-align:center;
      box-sizing:border-box;
    }
    h1{
      margin:0;
      font-size:clamp(20px,4vw,36px);
      letter-spacing:0.02em;
      color:var(--accent);
      text-shadow:0 2px 8px rgba(30,144,255,0.12);
    }
    main{
      flex:1;
      display:flex;
      align-items:center;
      justify-content:center;
      width:100%;
      padding:24px;
      box-sizing:border-box;
    }
    .card{
      width:100%;
      max-width:760px;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.04);
      border-radius:12px;
      padding:36px;
      box-shadow:0 8px 30px rgba(2,6,23,0.6);
      text-align:center;
    }
    .lead{
      font-size:18px;
      color:var(--muted);
      margin-bottom:22px;
    }
    .big-btn{
      display:inline-block;
      background:linear-gradient(180deg,var(--accent), #0b6fe6);
      color:white;
      padding:14px 22px;
      border-radius:10px;
      font-weight:600;
      font-size:16px;
      border:none;
      cursor:pointer;
      box-shadow:0 6px 18px rgba(14,90,180,0.28);
      transition:transform .12s ease, box-shadow .12s ease;
      text-decoration:none;
    }
    .big-btn:active{transform:translateY(1px);}
    .muted-line{
      margin-top:12px;
      color:var(--muted);
      font-size:14px;
    }
    /* 参加コードフォーム */
    .code-area{
      margin-top:26px;
      display:none;
      gap:12px;
      align-items:center;
      justify-content:center;
      flex-direction:column;
    }
    .code-input{
      width:100%;
      max-width:420px;
      display:flex;
      gap:8px;
      align-items:center;
      justify-content:center;
    }
    input[type="text"]{
      flex:1;
      padding:12px 14px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.06);
      background:rgba(255,255,255,0.02);
      color:var(--text);
      font-size:15px;
      outline:none;
    }
    .small-btn{
      padding:10px 14px;
      border-radius:8px;
      border:none;
      background:rgba(255,255,255,0.04);
      color:var(--text);
      cursor:pointer;
      font-weight:600;
    }
    .hint{
      color:var(--muted);
      font-size:13px;
      margin-top:8px;
    }
    .ok{
      color:#9ff7b5;
      margin-top:12px;
      font-weight:600;
    }
    .err{
      color:var(--danger);
      margin-top:12px;
      font-weight:600;
    }
    footer{
      width:100%;
      text-align:center;
      padding:18px 12px;
      color:var(--muted);
      font-size:13px;
    }
    @media (max-width:520px){
      .card{padding:20px;}
      .big-btn{width:100%;}
    }
  </style>
</head>
<body>
  <header>
    <h1>http://win7FreeSyutoku.comにようこそ!</h1>
  </header>

  <main>
    <div class="card" role="main" aria-labelledby="main-title">
      <div id="main-title" class="lead">参加コードを入手してWindows7を入手</div>

      <button id="getCodeBtn" class="big-btn" aria-expanded="false">参加コードを入手してWindows7を入手</button>

      <div class="muted-line">もしくは050-0007-3150に電話してください。</div>

      <div id="codeArea" class="code-area" aria-hidden="true">
        <div class="lead">参加コードを入力してください。</div>

        <div class="code-input">
          <input id="codeInput" type="text" placeholder="例: win7-12345-12345" aria-label="参加コード入力" />
          <button id="submitBtn" class="small-btn">送信</button>
        </div>

        <div id="currentCode" class="hint">現在の参加コードは <strong id="generatedCode">生成中...</strong></div>

        <div id="message" role="status" aria-live="polite"></div>
      </div>
    </div>
  </main>

  <footer>このページはネタサイトです</footer>

  <script>
    // ランダムな五桁を生成して win7-xxxxx-xxxxx 形式にする
    function makeCode(){
      const num = Math.floor(Math.random() * 90000) + 10000;
      return `win7-${num}-${num}`;
    }

    const getCodeBtn = document.getElementById('getCodeBtn');
    const codeArea = document.getElementById('codeArea');
    const generatedCodeEl = document.getElementById('generatedCode');
    const codeInput = document.getElementById('codeInput');
    const submitBtn = document.getElementById('submitBtn');
    const message = document.getElementById('message');

    // 初期コードを生成して表示
    let currentCode = makeCode();
    generatedCodeEl.textContent = currentCode;

    // ボタンでフォームを表示
    getCodeBtn.addEventListener('click', () => {
      const expanded = getCodeBtn.getAttribute('aria-expanded') === 'true';
      if(!expanded){
        codeArea.style.display = 'flex';
        codeArea.setAttribute('aria-hidden','false');
        getCodeBtn.setAttribute('aria-expanded','true');
        // 新しいコードを生成して表示（ボタンを押すたびに更新）
        currentCode = makeCode();
        generatedCodeEl.textContent = currentCode;
        message.textContent = '';
        codeInput.value = '';
      } else {
        codeArea.style.display = 'none';
        codeArea.setAttribute('aria-hidden','true');
        getCodeBtn.setAttribute('aria-expanded','false');
      }
    });

    // 正しいコードならテキストファイルをダウンロードさせる
    submitBtn.addEventListener('click', handleSubmit);
    codeInput.addEventListener('keydown', (e) => {
      if(e.key === 'Enter') handleSubmit();
    });

    function handleSubmit(){
      const val = (codeInput.value || '').trim();
      if(!val){
        showMessage('参加コードを入力してください。', 'err');
        return;
      }
      if(val === currentCode){
        // ダウンロード用テキストを作る
        const content = 'このサイトはジョークです。本当にダウンロードしたいならiboysoftとかでダウンロードしてね';
        const blob = new Blob([content], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'readme.txt';
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
        showMessage('参加コードが確認されました。テキストファイルをダウンロードしました。', 'ok');
      } else {
        showMessage('参加コードが違います。もう一度確認してください。', 'err');
      }
    }

    function showMessage(text, kind){
      message.textContent = text;
      message.className = kind === 'ok' ? 'ok' : 'err';
    }

    // ページ読み込み時にフォーカスをボタンへ
    window.addEventListener('load', () => {
      getCodeBtn.focus();
    });
  </script>
</body>
</html>